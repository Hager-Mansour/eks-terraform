- name: Add ArgoCD Helm repository
  shell: helm repo add argo https://argoproj.github.io/argo-helm || true
  changed_when: false

- name: Update Helm repositories
  command: helm repo update
  changed_when: false

- name: Install ArgoCD (disable hooks for CI)
  command: >
    helm upgrade --install argocd argo/argo-cd
    --namespace argocd
    --create-namespace
    --no-hooks
  changed_when: false
